<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>gitåŸºæœ¬æ“ä½œ</title>
    <url>/2023/01/17/git%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<p>Git å¸¸ç”¨çš„æ˜¯ä»¥ä¸‹ 6 ä¸ªå‘½ä»¤ï¼šgit cloneã€git pushã€git add ã€git commitã€git checkoutã€git pull.<br><img src="https://pic.imgdb.cn/item/63df62d34757feff33131295.jpg"></p>
<h2 id="å¿«é€Ÿå¼€å§‹"><a href="#å¿«é€Ÿå¼€å§‹" class="headerlink" title="å¿«é€Ÿå¼€å§‹"></a>å¿«é€Ÿå¼€å§‹</h2><h3 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#åˆå§‹åŒ–ä»“åº“,åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“</span>
<span class="token function">git</span> init

<span class="token comment" spellcheck="true">#æ·»åŠ å½“å‰æ‰€æœ‰æ–‡ä»¶åˆ°ç¼“å­˜åŒº</span>
<span class="token function">git</span> add <span class="token keyword">.</span>

<span class="token comment" spellcheck="true">#æäº¤æš‚å­˜åŒºä¸­çš„å†…å®¹åˆ°æœ¬åœ°ä»“åº“ -m:æäº¤çš„ä¿¡æ¯</span>
<span class="token function">git</span> commit -m <span class="token string">"ä¿¡æ¯"</span>

<span class="token comment" spellcheck="true">#æœ¬åœ°ä¸è¿œç¨‹ä»“åº“è¿æ¥</span>
<span class="token function">git</span> remote add origin <span class="token operator">&lt;</span>è¿œç¨‹ä»“åº“é“¾æ¥<span class="token operator">></span>

<span class="token comment" spellcheck="true">#å¦‚æœè¿œç¨‹ä»“åº“åˆ›å»ºäº†readmeæ–‡ä»¶ï¼Œå¯ä»¥å…ˆæŠŠè¿œç¨‹ä»“åº“çš„é¡¹ç›®pullä¸‹æ¥</span>
<span class="token function">git</span> pull origin master

<span class="token comment" spellcheck="true">#å°†æœ¬åœ°çš„åˆ†æ”¯ç‰ˆæœ¬ä¸Šä¼ åˆ°è¿œç¨‹å¹¶åˆå¹¶, git push &lt;è¿œç¨‹ä¸»æœºå> &lt;æœ¬åœ°åˆ†æ”¯å>  &lt;è¿œç¨‹åˆ†æ”¯å>, -u å‚æ•°æŒ‡å®šä¸€ä¸ªé»˜è®¤ä¸»æœº</span>
<span class="token function">git</span> push -u origin master
</code></pre>
<h3 id="gitåˆ†æ”¯å¸¸ç”¨å‘½ä»¤"><a href="#gitåˆ†æ”¯å¸¸ç”¨å‘½ä»¤" class="headerlink" title="gitåˆ†æ”¯å¸¸ç”¨å‘½ä»¤"></a>gitåˆ†æ”¯å¸¸ç”¨å‘½ä»¤</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#åˆ—å‡ºæœ¬åœ°æ‰€æœ‰åˆ†æ”¯</span>
<span class="token function">git</span> branch

<span class="token comment" spellcheck="true">#åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯</span>
<span class="token function">git</span> branch -r

<span class="token comment" spellcheck="true">#æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯</span>
<span class="token function">git</span> branch åˆ†æ”¯å

<span class="token comment" spellcheck="true">#æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯</span>
<span class="token function">git</span> checkout -b åˆ†æ”¯å

<span class="token comment" spellcheck="true">#åˆ‡æ¢åˆ†æ”¯</span>
<span class="token function">git</span> checkout åˆ†æ”¯å

<span class="token comment" spellcheck="true">#åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯</span>
<span class="token function">git</span> merge åˆ†æ”¯å

<span class="token comment" spellcheck="true">#åˆ é™¤åˆ†æ”¯</span>
<span class="token function">git</span> branch -d åˆ†æ”¯å

<span class="token comment" spellcheck="true">#åˆ é™¤è¿œç¨‹åˆ†æ”¯</span>
<span class="token function">git</span> push origin --delete åˆ†æ”¯å
<span class="token function">git</span> branch -dr åˆ†æ”¯å
</code></pre>
<h3 id="è¿œç¨‹ä»“åº“æ“ä½œ"><a href="#è¿œç¨‹ä»“åº“æ“ä½œ" class="headerlink" title="è¿œç¨‹ä»“åº“æ“ä½œ"></a>è¿œç¨‹ä»“åº“æ“ä½œ</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#å…‹éš†ä»“åº“</span>
<span class="token function">git</span> clone <span class="token operator">&lt;</span>repo<span class="token operator">></span>

<span class="token comment" spellcheck="true">#å…‹éš†åˆ°æŒ‡å®šçš„ç›®å½•</span>
<span class="token function">git</span> clone <span class="token operator">&lt;</span>repo<span class="token operator">></span> <span class="token operator">&lt;</span>directory<span class="token operator">></span>

<span class="token comment" spellcheck="true">#æŸ¥çœ‹å½“å‰é…ç½®æœ‰å“ªäº›è¿œç¨‹ä»“åº“</span>
<span class="token function">git</span> remote

<span class="token comment" spellcheck="true">#åŠ ä¸Š -v å‚æ•°ï¼Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªåˆ«åçš„å®é™…é“¾æ¥åœ°å€</span>
<span class="token function">git</span> remote -v

<span class="token comment" spellcheck="true"># æ·»åŠ è¿œç¨‹ä»“åº“ï¼Œshortname(åœ¨æœ¬åœ°ä»“åº“ä¸­å¯¹è¿œç¨‹ä»“åº“èµ·çš„åˆ«å) url(è¿œç¨‹ä»“åº“åœ°å€)</span>
<span class="token function">git</span> remote add <span class="token operator">&lt;</span>shortname<span class="token operator">></span> <span class="token operator">&lt;</span>repo<span class="token operator">></span>

<span class="token comment" spellcheck="true">#ç§»é™¤è¿œç¨‹ä»“åº“å…³è”</span>
<span class="token function">git</span> remote <span class="token function">rm</span> <span class="token operator">&lt;</span>shortname<span class="token operator">></span>

<span class="token comment" spellcheck="true">#ä»è¿œç¨‹ä»“åº“ä¸‹è½½æ–°åˆ†æ”¯ä¸æ•°æ®</span>
<span class="token function">git</span> fetch <span class="token operator">&lt;</span>remote<span class="token operator">></span> <span class="token operator">&lt;</span>branch<span class="token operator">></span>

<span class="token comment" spellcheck="true">#ä»è¿œç«¯ä»“åº“æå–æ•°æ®å¹¶å°è¯•åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</span>
<span class="token function">git</span> merge <span class="token operator">&lt;</span>branch<span class="token operator">></span>
</code></pre>
<h3 id="gité…ç½®"><a href="#gité…ç½®" class="headerlink" title="gité…ç½®"></a>gité…ç½®</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#æ˜¾ç¤ºå½“å‰çš„ git é…ç½®ä¿¡æ¯</span>
<span class="token function">git</span> config --list

<span class="token comment" spellcheck="true">#ç¼–è¾‘ git é…ç½®æ–‡ä»¶:</span>
<span class="token function">git</span> config -e    <span class="token comment" spellcheck="true"># é’ˆå¯¹å½“å‰ä»“åº“ </span>
<span class="token function">git</span> config -e --global   <span class="token comment" spellcheck="true"># é’ˆå¯¹ç³»ç»Ÿä¸Šæ‰€æœ‰ä»“åº“</span>

<span class="token comment" spellcheck="true">#è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯</span>
<span class="token function">git</span> config --global user.name <span class="token string">"xxx"</span>
<span class="token function">git</span> config --global user.email xxxxxxxx@yyyy.com
</code></pre>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>æ•™ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>goè¯­è¨€ä»å…¥é—¨åˆ°æ”¾å¼ƒ</title>
    <url>/2023/01/18/go%E8%AF%AD%E8%A8%80%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/</url>
    <content><![CDATA[<h3 id="ç¬¬ä¸€ä¸ªgoç¨‹åº"><a href="#ç¬¬ä¸€ä¸ªgoç¨‹åº" class="headerlink" title="ç¬¬ä¸€ä¸ªgoç¨‹åº"></a>ç¬¬ä¸€ä¸ªgoç¨‹åº</h3><pre class=" language-go"><code class="language-go"><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token string">"fmt"</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
]]></content>
      <categories>
        <category>go</category>
      </categories>
      <tags>
        <tag>go</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>hexoéƒ¨ç½²</title>
    <url>/2023/01/17/hexo%E9%83%A8%E7%BD%B2/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. </p>
<h2 id="å¿«é€Ÿå¼€å§‹"><a href="#å¿«é€Ÿå¼€å§‹" class="headerlink" title="å¿«é€Ÿå¼€å§‹"></a>å¿«é€Ÿå¼€å§‹</h2><h3 id="åˆ›å»ºæ–°æ–‡ç« "><a href="#åˆ›å»ºæ–°æ–‡ç« " class="headerlink" title="åˆ›å»ºæ–°æ–‡ç« "></a>åˆ›å»ºæ–°æ–‡ç« </h3><pre class=" language-bash"><code class="language-bash">hexo new <span class="token string">"My New Post"</span>
</code></pre>
<p><a href="https://hexo.io/docs/writing.html">More</a></p>
<h3 id="å¯åŠ¨æœ¬åœ°æœåŠ¡"><a href="#å¯åŠ¨æœ¬åœ°æœåŠ¡" class="headerlink" title="å¯åŠ¨æœ¬åœ°æœåŠ¡"></a>å¯åŠ¨æœ¬åœ°æœåŠ¡</h3><pre class=" language-bash"><code class="language-bash">hexo server
</code></pre>
<p><a href="https://hexo.io/docs/server.html">More</a></p>
<h3 id="ç”Ÿæˆé™æ€æ–‡ä»¶"><a href="#ç”Ÿæˆé™æ€æ–‡ä»¶" class="headerlink" title="ç”Ÿæˆé™æ€æ–‡ä»¶"></a>ç”Ÿæˆé™æ€æ–‡ä»¶</h3><pre class=" language-bash"><code class="language-bash">hexo generate
</code></pre>
<p><a href="https://hexo.io/docs/generating.html">More</a></p>
<h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><pre class=" language-bash"><code class="language-bash">hexo deploy
</code></pre>
<p><a href="https://hexo.io/docs/one-command-deployment.html">More</a></p>
<h3 id="è„šæœ¬éƒ¨ç½²-è¿è¡Œ-sh-deploy-sh"><a href="#è„šæœ¬éƒ¨ç½²-è¿è¡Œ-sh-deploy-sh" class="headerlink" title="è„šæœ¬éƒ¨ç½²(è¿è¡Œ sh deploy.sh)"></a>è„šæœ¬éƒ¨ç½²(è¿è¡Œ sh deploy.sh)</h3><pre class=" language-bash"><code class="language-bash">hexo clean

hexo generate

hexo deploy
</code></pre>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>pingä¸é€šå¤–ç½‘çš„è§£å†³æ–¹æ¡ˆ(centos)</title>
    <url>/2023/02/05/ping%E4%B8%8D%E9%80%9A%E5%A4%96%E7%BD%91%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88(centos)/</url>
    <content><![CDATA[<p>ping ä¸é€šå¤–ç½‘ï¼Œç»å¤§éƒ¨åˆ†åŸå› æ˜¯ç”±äºdnsæœåŠ¡å™¨æ²¡æœ‰é…ç½®å¯¼è‡´çš„é—®é¢˜<br><img src="https://pic.imgdb.cn/item/63df62694757feff3312485e.png"></p>
<h3 id="1ã€ä¿®æ”¹é…ç½®æ–‡ä»¶æ·»åŠ DNS"><a href="#1ã€ä¿®æ”¹é…ç½®æ–‡ä»¶æ·»åŠ DNS" class="headerlink" title="1ã€ä¿®æ”¹é…ç½®æ–‡ä»¶æ·»åŠ DNS"></a>1ã€ä¿®æ”¹é…ç½®æ–‡ä»¶æ·»åŠ DNS</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#xxxä¸ºå¯¹åº”ç½‘å¡</span>
<span class="token function">vi</span> /etc/sysconfig/network-scripts/ifcfg-xxx

<span class="token comment" spellcheck="true">#æ·»åŠ DNS</span>
DNS1<span class="token operator">=</span>114.114.114.114
DNS2<span class="token operator">=</span>8.8.8.8
</code></pre>
<h3 id="2ã€æ·»åŠ DNSæœåŠ¡å™¨"><a href="#2ã€æ·»åŠ DNSæœåŠ¡å™¨" class="headerlink" title="2ã€æ·»åŠ DNSæœåŠ¡å™¨"></a>2ã€æ·»åŠ DNSæœåŠ¡å™¨</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">vi</span> /etc/resolv.conf

<span class="token comment" spellcheck="true">#æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œï¼š</span>
nameserver 8.8.8.8
nameserver 8.8.4.4
</code></pre>
<h3 id="3ã€é‡å¯ç½‘ç»œ"><a href="#3ã€é‡å¯ç½‘ç»œ" class="headerlink" title="3ã€é‡å¯ç½‘ç»œ"></a>3ã€é‡å¯ç½‘ç»œ</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">sudo</span> nmcli c reload

<span class="token comment" spellcheck="true">#æˆ–</span>
systemctl restart network

<span class="token comment" spellcheck="true">#æˆ–</span>
<span class="token function">service</span> network restart
</code></pre>
<h3 id="4ã€å¦‚æœä¸Šè¿°æ“ä½œè¿˜æ˜¯æ²¡æœ‰æˆåŠŸ"><a href="#4ã€å¦‚æœä¸Šè¿°æ“ä½œè¿˜æ˜¯æ²¡æœ‰æˆåŠŸ" class="headerlink" title="4ã€å¦‚æœä¸Šè¿°æ“ä½œè¿˜æ˜¯æ²¡æœ‰æˆåŠŸ"></a>4ã€å¦‚æœä¸Šè¿°æ“ä½œè¿˜æ˜¯æ²¡æœ‰æˆåŠŸ</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#æ·»åŠ é»˜è®¤ç½‘å…³</span>
<span class="token function">sudo</span> route add default gw 192.168.1.1

<span class="token comment" spellcheck="true">#ç„¶å</span>
<span class="token function">sudo</span> nmcli c reload
</code></pre>
<p>åˆ°æ­¤ä¸€èˆ¬éƒ½æ²¡é—®é¢˜äº†ğŸ˜€</p>
]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>centos</tag>
        <tag>linux</tag>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>pveé…ç½®åŠå¸¸è§é—®é¢˜å¤„ç†</title>
    <url>/2023/07/29/pve%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<h1 id="PVEæœåŠ¡å™¨é…ç½®åŠå¸¸è§é—®é¢˜å¤„ç†"><a href="#PVEæœåŠ¡å™¨é…ç½®åŠå¸¸è§é—®é¢˜å¤„ç†" class="headerlink" title="PVEæœåŠ¡å™¨é…ç½®åŠå¸¸è§é—®é¢˜å¤„ç†"></a>PVEæœåŠ¡å™¨é…ç½®åŠå¸¸è§é—®é¢˜å¤„ç†</h1><h2 id="0ã€å¸¸ç”¨å‘½ä»¤"><a href="#0ã€å¸¸ç”¨å‘½ä»¤" class="headerlink" title="0ã€å¸¸ç”¨å‘½ä»¤"></a>0ã€å¸¸ç”¨å‘½ä»¤</h2><pre class=" language-shell"><code class="language-shell">#æŸ¥çœ‹è™šæ‹Ÿæœºåˆ—è¡¨
qm list

#pveé‡å¯
reboot

#æŸ¥çœ‹é›†ç¾¤èµ„æºçŠ¶å†µ
pvesh get /cluster/resources

#å–å¾—è™šæ‹Ÿæœºå½“å‰çŠ¶æ€ `pvesh get /nodes/<èŠ‚ç‚¹id>/qemu/<è™šæ‹Ÿæœºid>/status/current`
pvesh get /nodes/pve/qemu/103/status/current

#å…³é—­è™šæ‹Ÿæœº `pvesh create /nodes/<èŠ‚ç‚¹id>/qemu/<è™šæ‹Ÿæœºid>/status/stop`
pvesh create /nodes/pve/qemu/103/status/stop

#å¯åŠ¨è™šæ‹Ÿæœº `pvesh create /nodes/<èŠ‚ç‚¹id>/qemu/<è™šæ‹Ÿæœºid>/status/start`
pvesh create /nodes/pve/qemu/103/status/start
</code></pre>
<h2 id="1ã€æ–°è£…é…ç½®"><a href="#1ã€æ–°è£…é…ç½®" class="headerlink" title="1ã€æ–°è£…é…ç½®"></a>1ã€æ–°è£…é…ç½®</h2><p>å–æ¶ˆè®¢é˜…</p>
<pre class=" language-shell"><code class="language-shell">sed -i "s/data.status !== 'Active'/false/g" /usr/share/javascript/proxmox-widget-toolkit/proxmoxlib.js
</code></pre>
<p>æ›´æ¢æº</p>
<pre class=" language-shell"><code class="language-shell">rm -rf /etc/apt/sources.list.d/pve-enterprise.list

wget http://download.proxmox.com/debian/proxmox-ve-release-6.x.gpg -O /etc/apt/trusted.gpg.d/proxmox-ve-release-6.x.gpg

echo "deb http://download.proxmox.com/debian/pve buster pve-no-subscription" >/etc/apt/sources.list.d/pve-install-repo.list

echo "deb http://mirrors.aliyun.com/debian/ buster main non-free contrib  
deb-src http://mirrors.aliyun.com/debian/ buster main non-free contrib  
deb http://mirrors.aliyun.com/debian-security buster/updates main  
deb-src http://mirrors.aliyun.com/debian-security buster/updates main  
deb http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib  
deb-src http://mirrors.aliyun.com/debian/ buster-updates main non-free contrib  
deb http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib  
deb-src http://mirrors.aliyun.com/debian/ buster-backports main non-free contrib" >/etc/apt/sources.list

apt update
</code></pre>
<p>æ›´æ¢LXCå›½å†…æº</p>
<pre class=" language-shell"><code class="language-shell">grep -rn "download.proxmox.com" /usr/share/perl5/PVE/\* #æŸ¥æ‰¾è®¾å®šä¸‹è½½æºçš„æ–‡ä»¶  
sed -i.bak "s#http://download.proxmox.com/images#https://mirrors.ustc.edu.cn/proxmox/images#g" /usr/share/perl5/PVE/APLInfo.pm  
wget -O /var/lib/pve-manager/apl-info/mirrors.ustc.edu.cn https://mirrors.ustc.edu.cn/proxmox/images/aplinfo-pve-6.dat
</code></pre>
<p>å®‰è£…æ—¶é—´åŒæ­¥æœåŠ¡  </p>
<pre class=" language-shell"><code class="language-shell">apt-get install ntp -y
</code></pre>
<h2 id="2ã€è™šæ‹Ÿæœºè¿ç§»æ—¶éœ€è¦ç¡®è®¤å‡ ä¸ªé—®é¢˜"><a href="#2ã€è™šæ‹Ÿæœºè¿ç§»æ—¶éœ€è¦ç¡®è®¤å‡ ä¸ªé—®é¢˜" class="headerlink" title="2ã€è™šæ‹Ÿæœºè¿ç§»æ—¶éœ€è¦ç¡®è®¤å‡ ä¸ªé—®é¢˜"></a>2ã€è™šæ‹Ÿæœºè¿ç§»æ—¶éœ€è¦ç¡®è®¤å‡ ä¸ªé—®é¢˜</h2><ul>
<li>å…ˆå°†è™šæ‹Ÿæœºçš„ç£ç›˜ é€šè¿‡ç¡¬ä»¶ ä¸­çš„ è¿ç§»ç£ç›˜ ç§»åˆ°å…±äº«ç£ç›˜ä¸­ã€‚  </li>
<li>å†ç”¨è¿ç§»ï¼Œå°†æœåŠ¡è¿ç§»è¿‡å»ã€‚  </li>
<li>è¿ç§»æ—¶éœ€ç¡®è®¤ç¡¬ä»¶ï¼Œç›®æ ‡æœåŠ¡å™¨æ˜¯å¦æ»¡è¶³ç¡¬ç›˜éœ€æ±‚ã€‚ä¸èƒ½æ»¡è¶³çš„éœ€è¦å…ˆè°ƒæ•´ã€‚</li>
</ul>
<h2 id="3ã€ç¡¬ç›˜ç©ºé—´è°ƒå°"><a href="#3ã€ç¡¬ç›˜ç©ºé—´è°ƒå°" class="headerlink" title="3ã€ç¡¬ç›˜ç©ºé—´è°ƒå°"></a>3ã€ç¡¬ç›˜ç©ºé—´è°ƒå°</h2><h4 id="3-1è°ƒæ•´è™šæ‹Ÿæœºç¡¬ç›˜çš„å¤§å°"><a href="#3-1è°ƒæ•´è™šæ‹Ÿæœºç¡¬ç›˜çš„å¤§å°" class="headerlink" title="3.1è°ƒæ•´è™šæ‹Ÿæœºç¡¬ç›˜çš„å¤§å°"></a>3.1è°ƒæ•´è™šæ‹Ÿæœºç¡¬ç›˜çš„å¤§å°</h4><pre class=" language-shell"><code class="language-shell">#æŸ¥çœ‹è™šæ‹Ÿæœºç¡¬ç›˜ä¿¡æ¯
fdisk -l
#æŸ¥çœ‹è™šæ‹Ÿæœºç¡¬ç›˜è·¯å¾„
lvdisplay
#æŸ¥çœ‹è™šæ‹Ÿæœºç¡¬ç›˜å¤§å°  
lvs  
#è°ƒå°è™šæ‹Ÿæœºç¡¬ç›˜2Gï¼Œå¤‡æ³¨ï¼šè°ƒæ•´å‰å…ˆå°†ç³»ç»Ÿå†…çš„ç¡¬ç›˜è°ƒä¸ºæœªåˆ†é…çŠ¶æ€ã€‚  
lvreduce -L -2G /dev/pve/vm-100-disk-0
</code></pre>
<h4 id="3-2å¢åŠ -æˆ–å‡å°-local-ç›®å½•çš„å¤§å°å³æ‰©å®¹"><a href="#3-2å¢åŠ -æˆ–å‡å°-local-ç›®å½•çš„å¤§å°å³æ‰©å®¹" class="headerlink" title="3.2å¢åŠ  æˆ–å‡å° local ç›®å½•çš„å¤§å°å³æ‰©å®¹"></a>3.2å¢åŠ  æˆ–å‡å° local ç›®å½•çš„å¤§å°å³æ‰©å®¹</h4><p>é¦–å…ˆæ‰§è¡Œå‘½ä»¤ <code>fdisk -l</code> ï¼ŒæŸ¥çœ‹&#x2F;dev&#x2F;mapper&#x2F;pve-rootå¤§å°ï¼Œæ˜¾ç¤ºå†…å®¹å¤§æ¦‚å¦‚ä¸‹é¢çš„ï¼š</p>
<pre class=" language-shell"><code class="language-shell">Disk /dev/mapper/pve-root: 4.5 GiB, 4831838208 bytes, 9437184 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
</code></pre>
<p>ç„¶åå¯¹ &#x2F;dev&#x2F;mapper&#x2F;pve-root æ‰©å®¹ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼Œå³å¢åŠ 1Gçš„ç©ºé—´.</p>
<pre class=" language-shell"><code class="language-shell">lvextend -L +1G /dev/mapper/pve-root
</code></pre>
<p>æ‰§è¡Œåå®é™…å¤§å°å…¶å®æ˜¯è¿˜ä¸ä¼šå˜åŒ–çš„,è¿˜éœ€è¦ä¸‹è¾¹çš„å‘½ä»¤, ä½œç”¨æ˜¯æ‰§è¡Œä¸Šè¾¹çš„æ‰©å®¹æ“ä½œ  </p>
<pre class=" language-shell"><code class="language-shell">resize2fs /dev/mapper/pve-root
</code></pre>
<h4 id="3-3å¦‚ä½•è¦åˆ é™¤-local-vm-ç„¶åæŠŠæ‰€æœ‰çš„ç©ºé—´éƒ½ç§»åˆ°-localä¸‹ï¼Œé‚£ä¹ˆå¦‚ä½•æ“ä½œã€‚"><a href="#3-3å¦‚ä½•è¦åˆ é™¤-local-vm-ç„¶åæŠŠæ‰€æœ‰çš„ç©ºé—´éƒ½ç§»åˆ°-localä¸‹ï¼Œé‚£ä¹ˆå¦‚ä½•æ“ä½œã€‚" class="headerlink" title="3.3å¦‚ä½•è¦åˆ é™¤ local-vm ç„¶åæŠŠæ‰€æœ‰çš„ç©ºé—´éƒ½ç§»åˆ° localä¸‹ï¼Œé‚£ä¹ˆå¦‚ä½•æ“ä½œã€‚"></a>3.3å¦‚ä½•è¦åˆ é™¤ local-vm ç„¶åæŠŠæ‰€æœ‰çš„ç©ºé—´éƒ½ç§»åˆ° localä¸‹ï¼Œé‚£ä¹ˆå¦‚ä½•æ“ä½œã€‚</h4><ul>
<li>å…ˆç§»é™¤local-lvmå¯¹åº”çš„é€»è¾‘å·pve&#x2F;data</li>
</ul>
<pre class=" language-shell"><code class="language-shell">lvremove pve/data
</code></pre>
<ul>
<li>å¯¹localå¯¹åº”çš„é€»è¾‘å·&#x2F;dev&#x2F;mapper&#x2F;pve-rootè¿›è¡Œåœ¨çº¿æ‰©å®¹</li>
</ul>
<pre class=" language-shell"><code class="language-shell">lvextend -l +100%FREE -r /dev/mapper/pve-root
</code></pre>
<ul>
<li>æ‰§è¡Œåå®é™…å¤§å°å…¶å®æ˜¯è¿˜ä¸ä¼šå˜åŒ–çš„,è¿˜éœ€è¦ä¸‹è¾¹çš„å‘½ä»¤, ä½œç”¨æ˜¯æ‰§è¡Œä¸Šè¾¹çš„æ‰©å®¹æ“ä½œ</li>
</ul>
<pre class=" language-shell"><code class="language-shell">resize2fs /dev/mapper/pve-root
</code></pre>
<ul>
<li><p>Webä¸­ä¾æ¬¡å±•å¼€æ•°æ®ä¸­å¿ƒ-å­˜å‚¨ï¼Œç¼–è¾‘local-lvmï¼ŒæŠŠlocal-lvmä¸­å¯¹åº”èŠ‚ç‚¹ç§»é™¤å³å¯ã€‚</p>
</li>
<li><p>è¿˜æœ‰åœ¨æ•°æ®ä¸­å¿ƒ-å­˜å‚¨ï¼Œç¼–è¾‘localï¼Œå†…å®¹ä¸‹æ‹‰èœå•ä¸­æŠŠæ‰€æœ‰çš„å†…å®¹éƒ½é€‰ä¸Šï¼Œä»¥ä¾¿è¿™ä¸ªç©ºé—´å¯ä»¥å‚¨å­˜ç£ç›˜æ˜ åƒã€‚</p>
</li>
</ul>
<h2 id="4ã€å¼€å¯PVEåµŒå¥—è™šæ‹ŸåŒ–åŠŸèƒ½"><a href="#4ã€å¼€å¯PVEåµŒå¥—è™šæ‹ŸåŒ–åŠŸèƒ½" class="headerlink" title="4ã€å¼€å¯PVEåµŒå¥—è™šæ‹ŸåŒ–åŠŸèƒ½"></a>4ã€å¼€å¯PVEåµŒå¥—è™šæ‹ŸåŒ–åŠŸèƒ½</h2><p>é€šè¿‡å‘½ä»¤æ£€éªŒåµŒå¥—è™šæ‹ŸåŒ–åŠŸèƒ½æ˜¯å¦å·²è¢«å¼€å¯ï¼š</p>
<pre class=" language-shell"><code class="language-shell">vim /sys/module/kvm\_intel/parameters/nested
</code></pre>
<p>å¼€å¯å†…æ ¸æ”¯æŒï¼š</p>
<pre class=" language-shell"><code class="language-shell">modprobe -r kvm\_intel  
modprobe kvm\_intel nested=1
</code></pre>
<p>ç°åœ¨å†çœ‹çœ‹nestedæ˜¯å¦å·²å¼€å¯ï¼š</p>
<pre class=" language-shell"><code class="language-shell">cat /sys/module/kvm\_intel/parameters/nested
Y
</code></pre>
<p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p>
<pre class=" language-shell"><code class="language-shell">echo "options kvm\_intel nested=1" >>/etc/modprobe.d/modprobe.conf
</code></pre>
<h2 id="5ã€æŸ¥çœ‹å’Œå…³é—­è™šæ‹Ÿæœº"><a href="#5ã€æŸ¥çœ‹å’Œå…³é—­è™šæ‹Ÿæœº" class="headerlink" title="5ã€æŸ¥çœ‹å’Œå…³é—­è™šæ‹Ÿæœº"></a>5ã€æŸ¥çœ‹å’Œå…³é—­è™šæ‹Ÿæœº</h2><pre class=" language-shell"><code class="language-shell">#åˆ—å‡ºæ‰€æœ‰è™šæ‹Ÿæœºï¼š
qm list
#å…³é—­è™šæ‹Ÿæœºï¼š
qm stop
</code></pre>
<h2 id="6ã€é•œåƒè½¬æ¢"><a href="#6ã€é•œåƒè½¬æ¢" class="headerlink" title="6ã€é•œåƒè½¬æ¢"></a>6ã€é•œåƒè½¬æ¢</h2><pre class=" language-shell"><code class="language-shell">qemu-img convert disk.qcow2 disk.vmdk
</code></pre>
<h2 id="7ã€è¿ç§»ç›¸å…³è®¾ç½®"><a href="#7ã€è¿ç§»ç›¸å…³è®¾ç½®" class="headerlink" title="7ã€è¿ç§»ç›¸å…³è®¾ç½®"></a>7ã€è¿ç§»ç›¸å…³è®¾ç½®</h2><p>PVEè¿ç§»çš„ç±»å‹åˆ†åŠ å¯†ï¼ˆsecureï¼‰æˆ–ä¸åŠ å¯†ï¼ˆinsecureï¼‰<br>secureè¿ç§»  </p>
<blockquote>
<p>ä¼˜ç‚¹ï¼šä¿¡æ¯å®‰å…¨ï¼ŒåŠ å¯†è¿ç§»<br>ç¼ºç‚¹ï¼šéå¸¸è€—è´¹hostä¸»æœºçš„CPUèµ„æºï¼Œä¸”è¿ç§»é€Ÿåº¦æ…¢  </p>
</blockquote>
<p>insecureè¿ç§»  </p>
<blockquote>
<p>ä¼˜ç‚¹ï¼šè¿ç§»é€Ÿåº¦å¿«ï¼Œå¯¹hostä¸»æœºçš„èµ„æºæ¶ˆè€—å°<br>ç¼ºç‚¹ï¼šä¸æ˜¯åŠ å¯†è¿ç§»ï¼Œä¿¡æ¯å®‰å…¨éœ€è¦è€ƒè™‘  </p>
</blockquote>
<p>å¦‚æœåœ¨ç½‘ç»œå®Œå…¨è‡ªä¸»å¯æ§çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è€ƒè™‘insecureè¿ç§»</p>
<p>è¿ç§»ç±»å‹åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼Œwebæ§åˆ¶å°æ— æ³•è®¾ç½®<br>è¿›å…¥ä»»æ„hostèŠ‚ç‚¹â€”-shell  </p>
<pre class=" language-shell"><code class="language-shell">root@m71:~# cat /etc/pve/datacenter.cfg
keyboard: en-us
migration: network=172.18.171.71/24,type=insecure
typeå¯ä»¥è®¾ç½®ä¸º åŠ å¯†secureï¼ˆé»˜è®¤ï¼‰ä¸åŠ å¯†insecure
</code></pre>
<h2 id="8ã€é—®é¢˜å¤„ç†"><a href="#8ã€é—®é¢˜å¤„ç†" class="headerlink" title="8ã€é—®é¢˜å¤„ç†"></a>8ã€é—®é¢˜å¤„ç†</h2><h4 id="8-1ã€è¿ç§»æ—¶æç¤ºè®¤è¯å¤±è´¥æ—¶"><a href="#8-1ã€è¿ç§»æ—¶æç¤ºè®¤è¯å¤±è´¥æ—¶" class="headerlink" title="8.1ã€è¿ç§»æ—¶æç¤ºè®¤è¯å¤±è´¥æ—¶"></a>8.1ã€è¿ç§»æ—¶æç¤ºè®¤è¯å¤±è´¥æ—¶</h4><blockquote>
<p>Host key verification failed.</p>
</blockquote>
<p>åœ¨æ§åˆ¶å°è¿è¡Œå¦‚ä¸‹  </p>
<pre class=" language-shell"><code class="language-shell">/usr/bin/ssh -e none -o 'HostKeyAlias=pve1' root@192.168.3.241 /bin/true

ssh 192.168.3.241
</code></pre>
<h4 id="8-2ã€PVEä¸‹qm-stopæç¤ºè¶…æ—¶çš„è§£å†³åŠæ³•"><a href="#8-2ã€PVEä¸‹qm-stopæç¤ºè¶…æ—¶çš„è§£å†³åŠæ³•" class="headerlink" title="8.2ã€PVEä¸‹qm stopæç¤ºè¶…æ—¶çš„è§£å†³åŠæ³•"></a>8.2ã€PVEä¸‹qm stopæç¤ºè¶…æ—¶çš„è§£å†³åŠæ³•</h4><blockquote>
<p>TASK ERROR: canâ€™t lock file â€˜&#x2F;var&#x2F;lock&#x2F;qemu-server&#x2F;lock-108.confâ€™ - got timeout</p>
</blockquote>
<p>rm è¯¥æ–‡ä»¶å°±å¯ä»¥äº†ã€‚</p>
<ul>
<li><p>å…ˆåœ¨shellé‡Œè¾“å…¥ <code>rm /var/lock/qemu-server/lock-108.conf</code> #108æ˜¯ä½ çš„è™šæ‹Ÿæœºç¼–å·</p>
</li>
<li><p>å†è¾“å…¥<code>qm stop 108</code> å°±å¯ä»¥ç«‹å³å…³é—­ä½ çš„108å·è™šæ‹Ÿæœºäº†</p>
</li>
</ul>
<h4 id="8-3ã€è™šæ‹Ÿæœºå­˜æ”¾è·¯å¾„"><a href="#8-3ã€è™šæ‹Ÿæœºå­˜æ”¾è·¯å¾„" class="headerlink" title="8.3ã€è™šæ‹Ÿæœºå­˜æ”¾è·¯å¾„"></a>8.3ã€è™šæ‹Ÿæœºå­˜æ”¾è·¯å¾„</h4><blockquote>
<p>isoå­˜æ”¾è·¯å¾„ï¼š <code>/var/lib/vz/template/iso/</code></p>
</blockquote>
<blockquote>
<p>å¤‡ä»½è·¯å¾„ï¼š <code>/var/lib/vz/dump/æ–‡ç« åœ°å€https://www.yii666.com/blog/469212.html</code></p>
</blockquote>
<blockquote>
<p>local è·¯å¾„ï¼š<code>/var/lib/vz/images/</code></p>
</blockquote>
<blockquote>
<p>local-vm è·¯å¾„ï¼š <code>/dev/pve/</code></p>
</blockquote>
<blockquote>
<p>è™šæ‹Ÿæœºé…ç½®æ–‡ä»¶è·¯å¾„ï¼š <code>/etc/pve/</code></p>
</blockquote>
<blockquote>
<p>é›†ç¾¤ä¸­è™šæ‹Ÿæœºé…ç½®æ–‡ä»¶è·¯å¾„ï¼š <code>/etc/pve/nodes/pveï¼ˆpveä¸ºèŠ‚ç‚¹åç§°ï¼‰/qemu-server/</code></p>
</blockquote>
<h4 id="8-4ã€æœ¬æœºç¡¬ç›˜æ ¼å¼æ˜¯lvmï¼Œæ–°åŠ ç¡¬ç›˜æƒ³ä½¿ç”¨zfsæ ¼å¼ï¼Œé‚£ä¹ˆè¯·ä¸€å®šè¦å…³é—­swapã€‚-å‘½ä»¤ä¸º-swapoff-a-å¦åˆ™zfsä¼šå‘ç”Ÿå¾ˆæ€ªå¼‚çš„äº‹æƒ…"><a href="#8-4ã€æœ¬æœºç¡¬ç›˜æ ¼å¼æ˜¯lvmï¼Œæ–°åŠ ç¡¬ç›˜æƒ³ä½¿ç”¨zfsæ ¼å¼ï¼Œé‚£ä¹ˆè¯·ä¸€å®šè¦å…³é—­swapã€‚-å‘½ä»¤ä¸º-swapoff-a-å¦åˆ™zfsä¼šå‘ç”Ÿå¾ˆæ€ªå¼‚çš„äº‹æƒ…" class="headerlink" title="8.4ã€æœ¬æœºç¡¬ç›˜æ ¼å¼æ˜¯lvmï¼Œæ–°åŠ ç¡¬ç›˜æƒ³ä½¿ç”¨zfsæ ¼å¼ï¼Œé‚£ä¹ˆè¯·ä¸€å®šè¦å…³é—­swapã€‚ å‘½ä»¤ä¸º swapoff -a ,å¦åˆ™zfsä¼šå‘ç”Ÿå¾ˆæ€ªå¼‚çš„äº‹æƒ…."></a>8.4ã€æœ¬æœºç¡¬ç›˜æ ¼å¼æ˜¯lvmï¼Œæ–°åŠ ç¡¬ç›˜æƒ³ä½¿ç”¨zfsæ ¼å¼ï¼Œé‚£ä¹ˆè¯·ä¸€å®šè¦å…³é—­swapã€‚ å‘½ä»¤ä¸º <code>swapoff -a</code> ,å¦åˆ™zfsä¼šå‘ç”Ÿå¾ˆæ€ªå¼‚çš„äº‹æƒ….</h4><h4 id="8-5ã€è™šæ‹Ÿæœºå‡ºç°é—®é¢˜çŠ¶æ€ä¸ºunkonwçš„è§£å†³æ–¹æ³•"><a href="#8-5ã€è™šæ‹Ÿæœºå‡ºç°é—®é¢˜çŠ¶æ€ä¸ºunkonwçš„è§£å†³æ–¹æ³•" class="headerlink" title="8.5ã€è™šæ‹Ÿæœºå‡ºç°é—®é¢˜çŠ¶æ€ä¸ºunkonwçš„è§£å†³æ–¹æ³•"></a>8.5ã€è™šæ‹Ÿæœºå‡ºç°é—®é¢˜çŠ¶æ€ä¸ºunkonwçš„è§£å†³æ–¹æ³•</h4><pre class=" language-shell"><code class="language-shell">service rrdcached stop 

rm -rf /var/lib/rrdcached/* 

service rrdcached start
</code></pre>
]]></content>
      <categories>
        <category>pve</category>
      </categories>
      <tags>
        <tag>æ•™ç¨‹</tag>
        <tag>pve</tag>
      </tags>
  </entry>
</search>
